"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.overrideXMLHttpRequest = void 0;
/**
 * Force XMLHttpRequest to drop `traceparent` from the header by setting Microsoft_ApplicationInsights_BypassAjaxInstrumentation === true.
 * When `traceparent` property exists in the header, logs will get dropped in aria telementry.
 *
 * NOTE: take extra precaution when modifying this file.
 */
function overrideXMLHttpRequest() {
    (function (xmlHttpRequest) {
        function PatchedXmlHttpRequest() {
            var xhr = new xmlHttpRequest();
            // eslint-disable-next-line @typescript-eslint/no-explicit-any
            xhr.Microsoft_ApplicationInsights_BypassAjaxInstrumentation = true;
            return xhr;
        }
        globalThis.XMLHttpRequest = new Proxy(xmlHttpRequest, {
            apply: function () { return PatchedXmlHttpRequest(); },
            construct: function () { return PatchedXmlHttpRequest(); }
        });
    })(globalThis.XMLHttpRequest);
}
exports.overrideXMLHttpRequest = overrideXMLHttpRequest;
//# sourceMappingURL=overrideXMLHttpRequest.js.map