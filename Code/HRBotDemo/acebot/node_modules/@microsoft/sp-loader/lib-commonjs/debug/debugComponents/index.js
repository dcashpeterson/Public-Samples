"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.showError = exports.showDebugPrompt = void 0;
var tslib_1 = require("tslib");
var React = tslib_1.__importStar(require("react"));
var ReactDom = tslib_1.__importStar(require("react-dom"));
var DebugPrompt_1 = tslib_1.__importDefault(require("./debugPrompt/DebugPrompt"));
var DebugError_1 = tslib_1.__importDefault(require("./debugError/DebugError"));
var DebugPrompt_resx_1 = tslib_1.__importDefault(require("./debugPrompt/DebugPrompt.resx"));
var _errorIsShown = false;
var _containerElement;
function showDebugPrompt(options) {
    return new Promise(function (resolve) {
        var title = options.loaderRequested && options.manifestsRequested
            ? DebugPrompt_resx_1.default.allowDebugLoaderAndManifestsTitle
            : options.loaderRequested
                ? DebugPrompt_resx_1.default.allowDebugLoaderTitle
                : DebugPrompt_resx_1.default.allowDebugManifestsTitle;
        // eslint-disable-next-line @microsoft/spfx/pair-react-dom-render-unmount
        ReactDom.render(React.createElement(DebugPrompt_1.default, { title: title, callback: resolve }), _ensureEmptyContainerElement());
    });
}
exports.showDebugPrompt = showDebugPrompt;
function showError(innerError, errorText, title) {
    // Only show the prompt once
    if (!_errorIsShown) {
        _errorIsShown = true;
        // eslint-disable-next-line @microsoft/spfx/pair-react-dom-render-unmount
        ReactDom.render(React.createElement(DebugError_1.default, { innerError: innerError, errorText: errorText, title: title }), _ensureEmptyContainerElement());
    }
}
exports.showError = showError;
function _ensureEmptyContainerElement() {
    if (!_containerElement) {
        _containerElement = document.createElement('div');
        document.body.appendChild(_containerElement);
    }
    return _containerElement;
}
//# sourceMappingURL=index.js.map