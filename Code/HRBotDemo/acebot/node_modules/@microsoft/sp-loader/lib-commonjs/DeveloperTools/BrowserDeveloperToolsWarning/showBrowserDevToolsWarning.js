"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.minifyConsoleCSS = exports.showBrowserDevToolsWarning = void 0;
var tslib_1 = require("tslib");
var sp_core_library_1 = require("@microsoft/sp-core-library");
var BrowserDeveloperToolsWarning_resx_1 = tslib_1.__importDefault(require("./BrowserDeveloperToolsWarning.resx"));
var WARNING_URL = 'https://technet.microsoft.com/en-us/library/bb794823.aspx';
function showBrowserDevToolsWarning() {
    var browserInfo = sp_core_library_1._BrowserDetection.getBrowserInformation();
    var warningHeading = BrowserDeveloperToolsWarning_resx_1.default.warningHeading;
    var warningLine1 = BrowserDeveloperToolsWarning_resx_1.default.warningLine1;
    var warningLine2 = sp_core_library_1.Text.format(BrowserDeveloperToolsWarning_resx_1.default.warningLine2, WARNING_URL);
    if (browserInfo.browser === sp_core_library_1._Browser.Chrome ||
        browserInfo.browser === sp_core_library_1._Browser.Firefox ||
        browserInfo.browser === sp_core_library_1._Browser.Safari) {
        var stylesCss = DEPRECATED_UNIT_TEST
            ? // eslint-disable-next-line @typescript-eslint/no-require-imports
                require('./BrowserDeveloperToolsWarning.css')
            : // eslint-disable-next-line @typescript-eslint/no-require-imports
                require('!!raw-loader!./BrowserDeveloperToolsWarning.css');
        // Parse out the styles from the CSS file
        var headingCss = minifyConsoleCSS((stylesCss.match(/\.heading\s*{([^}]+)}/) || [])[1]);
        var otherLinesCss = minifyConsoleCSS((stylesCss.match(/\.otherLines\s*{([^}]+)}/) || [])[1]);
        // Formatting supported
        // eslint-disable-next-line no-console
        console.log("\n%c".concat(warningHeading, "%c\n").concat(warningLine1, "\n\n").concat(warningLine2, "\n\n"), headingCss, otherLinesCss);
    }
    else {
        // No formatting
        // eslint-disable-next-line no-console
        console.log("\n".concat(warningHeading, "\n").concat(warningLine1, "\n\n").concat(warningLine2, "\n\n"));
    }
}
exports.showBrowserDevToolsWarning = showBrowserDevToolsWarning;
function minifyConsoleCSS(css) {
    return css
        .replace(/^\s+/g, '') // Leading whitespace
        .replace(/:\s+/g, ':') // Leading attribute whitespace
        .replace(/;\s+/g, ';') // Trailing attribute whitespace
        .replace(/,\s+/g, ',') // Whitespace between commas in multi-value attribues
        .replace(/;$/, ''); // Remove final semi-colon
}
exports.minifyConsoleCSS = minifyConsoleCSS;
//# sourceMappingURL=showBrowserDevToolsWarning.js.map