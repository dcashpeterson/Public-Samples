"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.PackageSolutionTask = void 0;
const node_core_library_1 = require("@rushstack/node-core-library");
const spfx_heft_plugins_1 = require("@microsoft/spfx-heft-plugins");
const OdspGulpTask_1 = require("../OdspGulpTask");
const GulpTaskTerminalProvider_1 = require("../utilities/GulpTaskTerminalProvider");
// This should be "OdspGulpTask<void>", but GulpTaskTerminalProvider doesn't like that
class PackageSolutionTask extends OdspGulpTask_1.OdspGulpTask {
    constructor() {
        super('package-solution');
    }
    async executeTask() {
        const solutionPackager = new spfx_heft_plugins_1._SolutionPackager({
            buildFolder: this.buildConfig.rootPath,
            terminal: new node_core_library_1.Terminal(new GulpTaskTerminalProvider_1.GulpTaskTerminalProvider(this)),
            emitWarning: (error) => this.logWarning(error.message),
            emitError: (error) => this.logError(error.message)
        });
        await solutionPackager.packageSolutionAsync(this.buildConfig.production);
    }
}
exports.PackageSolutionTask = PackageSolutionTask;
//# sourceMappingURL=PackageSolutionTask.js.map