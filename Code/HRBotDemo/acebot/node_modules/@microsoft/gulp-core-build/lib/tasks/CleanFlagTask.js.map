{"version":3,"file":"CleanFlagTask.js","sourceRoot":"","sources":["../../src/tasks/CleanFlagTask.ts"],"names":[],"mappings":";AAAA,4FAA4F;AAC5F,2DAA2D;;;AAE3D,2CAAwC;AAIxC;;;GAGG;AACH,MAAa,aAAc,SAAQ,qBAAS;IAI1C;QACE,KAAK,EAAE,CAAC;QAJV,yDAAyD;QACjD,YAAO,GAAY,KAAK,CAAC;IAIjC,CAAC;IAEM,SAAS,CAAC,WAAyB;QACxC,MAAM,SAAS;QACb,wCAAwC;QACxC,CAAC,CAAC,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,WAAW,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,IAAI,CAAC,OAAO,KAAK,KAAK,CAAC;QACrF,OAAO,SAAS,CAAC;IACnB,CAAC;IAEM,WAAW,CAAC,IAAiB,EAAE,gBAAkD;QACtF,KAAK,CAAC,WAAW,CAAC,IAAI,EAAE,GAAG,EAAE;YAC3B,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;YACpB,gBAAgB,EAAE,CAAC;QACrB,CAAC,CAAC,CAAC;IACL,CAAC;CACF;AArBD,sCAqBC","sourcesContent":["// Copyright (c) Microsoft Corporation. All rights reserved. Licensed under the MIT license.\r\n// See LICENSE in the project root for license information.\r\n\r\nimport { CleanTask } from './CleanTask';\r\nimport * as Gulp from 'gulp';\r\nimport { IBuildConfig } from './../IBuildConfig';\r\n\r\n/**\r\n * This task runs at the start of any command if the --clean or -c parameter is specified\r\n * @public\r\n */\r\nexport class CleanFlagTask extends CleanTask {\r\n  /** Instantiates a new CleanTask with the name 'clean' */\r\n  private _hasRun: boolean = false;\r\n\r\n  public constructor() {\r\n    super();\r\n  }\r\n\r\n  public isEnabled(buildConfig: IBuildConfig): boolean {\r\n    const shouldRun: boolean =\r\n      // eslint-disable-next-line dot-notation\r\n      (!!buildConfig.args['clean'] || !!buildConfig.args['c']) && this._hasRun === false;\r\n    return shouldRun;\r\n  }\r\n\r\n  public executeTask(gulp: typeof Gulp, completeCallback: (error?: string | Error) => void): void {\r\n    super.executeTask(gulp, () => {\r\n      this._hasRun = true;\r\n      completeCallback();\r\n    });\r\n  }\r\n}\r\n"]}