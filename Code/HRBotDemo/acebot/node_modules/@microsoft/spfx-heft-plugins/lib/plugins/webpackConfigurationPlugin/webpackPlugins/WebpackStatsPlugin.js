"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.WebpackStatsPlugin = void 0;
const node_core_library_1 = require("@rushstack/node-core-library");
const PLUGIN_NAME = 'stats-plugin';
/**
 * This plugin drops the webpack stats object to the specified filesystem path
 *
 * @internal
 */
class WebpackStatsPlugin {
    constructor(options) {
        this._options = options;
    }
    apply(compiler) {
        compiler.hooks.done.tap(PLUGIN_NAME, (stats) => {
            const statsJson = stats.toJson();
            node_core_library_1.FileSystem.writeFile(this._options.dropPath, 
            // Using JSON.stringify here because JsonFile throws an exception serializing the stats object
            JSON.stringify(statsJson, undefined, 2), { ensureFolderExists: true });
        });
    }
}
exports.WebpackStatsPlugin = WebpackStatsPlugin;
//# sourceMappingURL=WebpackStatsPlugin.js.map