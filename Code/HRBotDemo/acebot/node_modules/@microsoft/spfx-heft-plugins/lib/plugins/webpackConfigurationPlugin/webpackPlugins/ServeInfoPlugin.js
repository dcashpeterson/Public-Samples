"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ServeInfoPlugin = void 0;
const url_1 = require("url");
const terminal_1 = require("@rushstack/terminal");
const constants_1 = require("../../../utilities/constants");
const PLUGIN_NAME = 'InfoPlugin';
/**
 * @internal
 */
class ServeInfoPlugin {
    constructor(options) {
        this._terminal = options.terminal;
        this.port = options.port || constants_1.DEFAULT_PORT;
        this._tempFolderName = options.tempFolderName || constants_1.DEFAULT_TEMP_FOLDER;
    }
    /**
     * Print information to the developer's console.
     */
    apply(compiler) {
        compiler.hooks.done.tap(PLUGIN_NAME, () => {
            const debugParams = new url_1.URLSearchParams(this.baseUrlSearchParams);
            debugParams.set('noredir', 'true');
            debugParams.set('debugManifestsFile', `https://localhost:${this.port}/${this._tempFolderName}/manifests.js`);
            terminal_1.PrintUtilities.printMessageInBox('To load your scripts, use this debug query string:', this._terminal);
            this._terminal.writeLine(`?${debugParams.toString()}`);
            this._terminal.writeLine();
        });
    }
}
exports.ServeInfoPlugin = ServeInfoPlugin;
//# sourceMappingURL=ServeInfoPlugin.js.map