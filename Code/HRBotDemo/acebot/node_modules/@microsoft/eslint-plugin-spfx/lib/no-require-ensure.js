"use strict";
// Copyright (c) Microsoft Corporation. All rights reserved. Licensed under the MIT license.
// See LICENSE in the project root for license information.
Object.defineProperty(exports, "__esModule", { value: true });
exports.noRequireEnsureRule = void 0;
const experimental_utils_1 = require("@typescript-eslint/experimental-utils");
const noRequireEnsureRule = {
    defaultOptions: [],
    meta: {
        type: 'problem',
        messages: {
            'error-require-ensure': 'Usage of "require.ensure(...)" is outdated. Use "import(...)" instead.'
        },
        schema: [],
        docs: {
            description: 'Prevent usage of Webpack\'s "require.ensure" method in favor of "import"',
            category: 'Best Practices',
            recommended: false,
            url: 'https://www.npmjs.com/package/@rushstack/eslint-plugin'
        }
    },
    create: (context) => {
        return {
            CallExpression: (node) => {
                if (node.callee.type === experimental_utils_1.TSESTree.AST_NODE_TYPES.MemberExpression) {
                    const { object, property } = node.callee;
                    if (object.type === experimental_utils_1.TSESTree.AST_NODE_TYPES.Identifier && object.name === 'require') {
                        if ((property.type === experimental_utils_1.TSESTree.AST_NODE_TYPES.Identifier && property.name === 'ensure') ||
                            (property.type === experimental_utils_1.TSESTree.AST_NODE_TYPES.Literal && property.value === 'ensure')) {
                            context.report({ node, messageId: 'error-require-ensure' });
                        }
                    }
                }
            }
        };
    }
};
exports.noRequireEnsureRule = noRequireEnsureRule;
//# sourceMappingURL=no-require-ensure.js.map